<app-user-submenu></app-user-submenu>

<!-- LATEST TRANSACTIONS -->
<div class="container mt-0 qlc-content-first qlc-content-home qlc-after-submenu">
    <div class="row">
        <div class="col-12 pl-0 pr-0 pb-2 pl-md-0 pr-md-0 pl-2 pr-2">
            <!-- LATEST TRANSACTIONS -->
            <div class="container">
                    <div class="row">
                        <!-- TITLE -->
                        <div class="col-md-6 col-12 mt-2 pl-2 pr-2">
                            <div class="content-title">
                                <h1 class="neo">NEO Wallet Details - {{ neoService.getNetwork() }}</h1>
                            </div>
                        </div>
                        <div class="col-md-3 col-12 pl-md-2 pr-md-2 pl-2 pr-2">
                            <button type="submit" class="btn btn-primary content-header float-right w-100 pl-0 pr-0 neo-background-light" (click)="loadWallet()">
                                Refresh
                            </button>
                        </div>
                        <div class="col-md-3 col-12 pl-2 pr-2 pt-md-0 pt-2">
                            <button type="submit" class="btn btn-primary content-header float-right w-100 pl-0 pr-0 neo-background-light" routerLink="/wallets">
                                Back to my Wallets
                            </button>
                        </div>
                    </div>
                </div>
        </div>
    </div>
</div>


<div class="container pb-2">
    <div class="row pl-md-0 pr-md-0 pl-2 pr-2">
        <!-- LEFT -->
        <div class="col-lg-9 col-md-12 col-sm-12 order-lg-1 order-2 pl-0 pr-0 mb-3">
            
            <div class="container">
                
                <div class="row">
                    <div class="col-12 pb-2 pl-2 pr-2">
                        <div class="content-box-blue h-auto pb-3 neo-background-light">
                            <div class="container">
                                <div class="row qlc-table-header-blue neo-background-light">
                                    <div class="col-12 white">Address</div>
                                </div>
                                <div class="row qlc-table-row-blue row-text-mid mt-3 neo-background-light">
                                    <div class="col-12 text-break pr-3"><span *ngIf="addressBookModel != ''" class="force-wrap">{{ addressBookModel }} - </span>{{ walletId }} <a ngxClipboard [cbContent]="walletId"><img src="assets/img/icons/copy.svg" class="img-copy" data-toggle="tooltip" data-placement="top" title="Copy to clipboard"></a></div>
                                    <div class="col-12 px-0" *ngIf="showEditName">
                                        <div class="editNameButtons">
                                            <div class="row pl-3 pr-3">
                                                <div class="col-md-12 col-12 py-3">
                                                    <input type="text" class="form-control" [(ngModel)]="addressBookModel" />
                                                </div>
                                                <div class="col-md-4 col-12 ">
                                                    <button class="btn btn-primary neo-background" type="button" (click)="editNameCancel()">
                                                        {{ 'CANCEL' | translate }}
                                                    </button>
                                                </div>
                                                <div class="col-md-4 col-12 py-3 py-md-0 ">
                                                    <button class="btn btn-primary neo-background" type="button" (click)="editNameSave()">
                                                        {{ 'OK' | translate }}
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                
                <div class="row">
                    <!-- BALANCE QLC -->
                    <div class="col-md-4 col-sm-6 col-12 pl-2 pr-2">
                        <div class="content-box-white h-auto mt-2 pb-2">
                            <div class="container">
                                <div class="row qlc-table-header-white">
                                    <div class="col-12">NEO Balance</div>
                                </div>
                            </div>
                            <div class="container">
                                <div class="row">
                                    <div class="col-3 mt-3">
                                        <img src="assets/img/token-neo.png" class="w-100 icon-token">
                                    </div>
                                    <div class="col-9 pr-0 pl-0">
                                        <div class="row qlc-table-row-white row-text-mid mt-3 pb-0">
                                            <div class="col-12 pb-0" *ngIf="walletAccount.balances != null && walletAccount.balances[neoService.tokenList['NEO'].networks['1'].hash]">{{ walletAccount.balances[neoService.tokenList['NEO'].networks['1'].hash].amount | currency:'':'':'1.0-0' }}</div>
                                            <div class="col-12 pb-0" *ngIf="walletAccount.balances == null || (walletAccount.balances != null && !walletAccount.balances[neoService.tokenList['NEO'].networks['1'].hash])">NaN</div>
                                        </div>
                                        <div class="row qlc-table-row-white sub-page pt-0">
                                            <div class="col-12 text-wrap pt-0"><span class="text-blue">-</span></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    
                    <!-- BALANCE QLC -->
                    <div class="col-md-4 col-sm-6 col-12 pl-2 pr-2">
                        <div class="content-box-white h-auto mt-2 pb-2">
                            <div class="container">
                                <div class="row qlc-table-header-white">
                                    <div class="col-12">QLC Balance</div>
                                </div>
                            </div>
                            <div class="container">
                                <div class="row">
                                    <div class="col-3 mt-3">
                                        <img src="assets/img/token-qlc.png" class="w-100 icon-token">
                                    </div>
                                    <div class="col-9 pr-0 pl-0">
                                        <div class="row qlc-table-row-white row-text-mid mt-3 pb-0">
                                            <div class="col-12 pb-0" *ngIf="this.neoqlcbalance != null">{{ this.neoqlcbalance | currency:'':'':'1.2-8' }}</div>
                                            <div class="col-12 pb-0" *ngIf="this.neoqlcbalance == null">NaN</div>
                                        </div>
                                        <div class="row qlc-table-row-white sub-page pt-0">
                                            <div class="col-12 text-wrap pt-0"><span class="text-blue">-</span></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>     
                    
                    <!-- BALANCE QGAS -->
                    <div class="col-md-4 col-sm-6 col-12 pl-2 pr-2">
                        <div class="content-box-white h-auto mt-2 pb-2">
                            <div class="container">
                                <div class="row qlc-table-header-white">
                                    <div class="col-12">GAS Balance</div>
                                </div>
                            </div>
                            <div class="container">
                                <div class="row">
                                    <div class="col-3 mt-3">
                                        <img src="assets/img/token-gas.png" class="w-100 icon-token">
                                    </div>
                                    <div class="col-9 pr-0 pl-0">
                                        <div class="row qlc-table-row-white row-text-mid mt-3 pb-0">
                                            <div class="col-12 pb-0" *ngIf="walletAccount.balances != null && walletAccount.balances[neoService.tokenList['GAS'].networks['1'].hash]">{{ walletAccount.balances[neoService.tokenList['GAS'].networks['1'].hash].amount | currency:'':'':'1.2-8' }}</div>
                                            <div class="col-12 pb-0" *ngIf="walletAccount.balances == null || (walletAccount.balances != null && !walletAccount.balances[neoService.tokenList['GAS'].networks['1'].hash])">NaN</div>
                                        </div>
                                        <div class="row qlc-table-row-white sub-page pt-0">
                                            <div class="col-12 text-wrap pt-0"><span class="text-blue">-</span></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="container mt-3">
                            <div class="row">
                                <div class="col-12 pl-0 pr-0">
                                    <button (click)="claim()" type="submit" class="btn btn-primary btn-green btn-icon-qlc w-100 pl-2 pr-0 neo-background-light">CLAIM GAS <span class="superlight">({{ claimableGas }})</span></button>
                                </div>
                            </div>
                        </div>
                    </div>  
                </div>
            </div>
            
            
        </div>
        
        <!-- RIGHT -->
        <div class="col-lg-3 col-md-12 col-sm-12 order-lg-2 order-1 pl-0 pr-0 mb-xs-3 mb-3">
            
            <div class="col-12 pl-2 pr-2">
                <div class="content-box-darkblue h-100 pb-4 pr-0 neo-background">
                    
                    <div class="container">
                        <div class="row qlc-table-header-blue neo-background">
                            <div class="col-12 white">Account Actions</div>
                        </div>
                        <div class="row pt-3 pr-0">
                            <div class="col-12 pr-0">
                                <a routerLink="/wallets/neo/send/{{ walletId }}" class="menu-myaccount menu-icon-send pr-0">Send</a>
                                <a (click)="openModal(qrCode)" class="menu-myaccount menu-icon-qrcode pr-0">Show QR Code</a>
                                <a (click)="editName()" class="menu-myaccount menu-icon-rename pr-0">Rename Account</a>
                                <a href="{{ neoService.getExplorer() }}/address/{{ walletId }}" class="menu-myaccount menu-icon-details pr-0" target="_blank">Account Details</a>
                                <a (click)="deleteWallet()" class="menu-myaccount menu-icon-delete pr-0" target="_blank">Delete wallet</a>
                            </div>
                        </div>
                        
                    </div>
                    
                </div>
            </div>
            <div class="col-12 pl-2 pr-2 mt-2">
                <div class="content-box-darkblue pb-2 pr-0 neo-background">
                    
                    <div class="container">
                        
                        <div class="row pt-3 pr-0">
                            <div class="col-12 pr-0">
                                <a (click)="recoverPrivateKey(recover)" class="menu-myaccount menu-icon-recoverkey pr-0" target="_blank">{{ neoPrivateCodeButton }}</a>
                                <a routerLink="/wallets/neo/settings" class="menu-myaccount menu-icon-details pr-0">Neo Node Settings</a>
                            </div>
                        </div>
                        
                    </div>
                    
                </div>
            </div>
            
        </div>
        
    </div>
</div>


<!-- LATEST SWAP TRANSACTIONS -->
<div class="container mt-0 mb-3">
  <div class="row">
    
    <div class="col-12 pl-0 pr-0">
      
      <!-- TITLE -->
      <div class="col-lg-12 mb-3 mt-2 pl-md-2 pr-md-2">
        <div class="content-title">
          <h1>Latest Swap Transactions</h1>
        </div>
      </div>

      <!-- LIST -->
      <div class="col-lg-12 mb-4 pl-md-2 pr-md-2">
        <div class="content-box-white">


          <div class="container">

            <div class="row qlc-table-header">
              <div class="col-xl-2 col-lg-3 pr-lg-4 col-md-3 col-4 text-left pr-sm-4 pr-md-0 pr-lg-0 pr-4">TYPE</div>
              <div class="col-xl-1 d-none d-xl-block text-color-lightgrey text-left text-tiny">STATUS</div>
              <div class="col-xl-2 col-lg-6 pr-lg-4 col-md-4 col-5 text-left pr-sm-4 pr-md-0 pr-lg-0 pr-4">SENDER</div>
              <div class="col-xl-2 d-none d-xl-block text-left pr-sm-4 pr-md-0 pr-lg-0 pr-4">RECIPIENT</div>
              <div class="col-xl-2 d-none d-xl-block text-left pr-sm-4 pr-md-0 pr-lg-0 pr-4">SWAPID</div>
              <div class="col-xl-1 col-lg-1 col-md-2 col-3 text-color-lightgrey text-right text-tiny">AMOUNT</div>
              <div class="col-xl-2 col-lg-2 pr-lg-4 col-md-3 d-none d-md-block text-right pr-sm-4 pr-4">TIME</div>
            </div>

            <div class="row qlc-table-row neo-table-row closed row-anim-in" *ngFor="let history of swapHistory">
              <div class="col-xl-2 col-lg-3 pr-lg-4 col-md-3 col-4 text-left text-color-lightgrey text-tiny">
                <span>
                    <span *ngIf="(history.state ==2)" class="qlc-icon-swap-red d-none d-md-inline-block" title="{{history.stateStr}}"></span>
                    <span *ngIf="(history.state ==1 || history.state ==3)" class="qlc-icon-swap-green d-none d-md-inline-block" title="{{history.stateStr}}"></span>
                    <span *ngIf="(history.state ==0)" class="qlc-icon-swap-blue d-none d-md-inline-block" title="{{history.stateStr}}"></span>
                    <span *ngIf="(history.state ==0 || history.state ==1)"><span class="text-color-lightgrey">Swap</span>  <span class="text-color-grey"> NEP5</span> <span class="text-color-lightgrey"> to </span> <span *ngIf="history.chain =='ETH'" class="text-color-grey">ERC20</span><span *ngIf="history.chain =='BSC'" class="text-color-grey">BEP20</span></span>
                    <span *ngIf="(history.state ==2 || history.state ==3 || history.state ==4)"><span class="text-color-lightgrey">Swap</span>  <span *ngIf="history.chain =='ETH'" class="text-color-grey"> ERC20</span><span *ngIf="history.chain =='BSC'" class="text-color-grey"> BEP20</span> <span class="text-color-lightgrey"> to </span> <span class="text-color-grey">NEP5</span></span><br>
                </span>
                <span class="d-xl-none">
                  <br>
                  <br>
                  Status: 
                  <span *ngIf="(history.state ==1 || history.state ==3)" class="text-color-green">Completed</span>
                  <span *ngIf="(history.state ==0 || history.state ==2)" class="text-blue">Pending</span>
                  <span *ngIf="(history.state ==4)" class="text-color-red">Failed</span>
                </span>
              </div>
              <div class="col-xl-1 d-none d-xl-block text-color-lightgrey text-left text-tiny">
                <span>
                  <span *ngIf="(history.state ==1 || history.state ==3)" class="text-color-green">Completed</span>
                  <span *ngIf="(history.state ==0 || history.state ==2)" class="text-blue">Pending</span>
                  <span *ngIf="(history.state ==4)" class="text-color-red">Failed</span>
                </span>
              </div>
              <div class="col-xl-2 col-lg-6 pr-lg-4 col-md-4 col-5 text-left text-color-lightgrey text-tiny">
                <span class="d-xl-none">Sender: </span>
                <a *ngIf="(history.state== 0 || history.state ==1)" href="{{ neotubeSite }}address/{{history.neoUserAddr}}/page/1" target="_blank" >{{history.neoUserAddr | squeeze : '10,9'}}</a>
                <a *ngIf="(history.state== 2 || history.state ==3)" href="{{ history.chain == 'ETH' ? etherscan : bscscan }}address/{{history.chainUserAddr}}" target="_blank" >{{history.chainUserAddr | squeeze : '10,9'}}</a>

                <span class="d-xl-none"><br>Recipient: </span>
                <a class="d-xl-none" *ngIf="(history.state== 2 || history.state ==3 || history.state ==4)" href="{{ neotubeSite }}address/{{history.neoUserAddr}}/page/1" target="_blank" >{{history.neoUserAddr | squeeze : '10,9'}}</a>
                <a class="d-xl-none" *ngIf="(history.state== 0 || history.state ==1)" href="{{ history.chain == 'ETH' ? etherscan : bscscan }}address/{{history.chainUserAddr}}" target="_blank" >{{history.chainUserAddr | squeeze : '10,9'}}</a>

                <span class="d-xl-none"><br>Swapid: </span>
                  <a class="d-xl-none" *ngIf="(history.state== 0 || history.state ==1)" href="{{ neotubeSite }}/transaction/{{history.neoTxHash}}" target="_blank" >
                    {{history.neoTxHash | squeeze : '10,9'}}
                  </a>
                  <a class="d-xl-none" *ngIf="(history.state== 2 || history.state ==3 || history.state ==4)" href="{{ history.chain == 'ETH' ? etherscan : bscscan }}/tx/{{history.chainTxHash}}" target="_blank" >
                    {{history.chainTxHash | squeeze : '10,9'}}
                  </a>
                
                <span class="d-md-none"><br>Time:<br class="d-sm-none"> {{ history.lastModifyTime | date: 'short' }}</span>
              </div>
              <div class="col-xl-2 d-none d-xl-block text-left text-color-lightgrey text-tiny">
                <a *ngIf="(history.state== 2 || history.state ==3 || history.state ==4)" href="{{ neotubeSite }}address/{{history.neoUserAddr}}/page/1" target="_blank" >{{history.neoUserAddr | squeeze : '11,10'}}</a>
                <a *ngIf="(history.state== 0 || history.state ==1)" href="{{ history.chain == 'ETH' ? etherscan : bscscan }}address/{{history.chainUserAddr}}" target="_blank" >{{history.chainUserAddr | squeeze : '11,10'}}</a>

              </div>
              <div class="col-xl-2 d-none d-xl-block text-left text-color-lightgrey text-tiny">
                <a *ngIf="(history.state== 0 || history.state ==1)" href="{{ neotubeSite }}/transaction/{{history.neoTxHash}}" target="_blank" >
                  {{history.neoTxHash | squeeze : '11,10'}}
                </a>
                <a *ngIf="(history.state== 2 || history.state ==3 || history.state ==4)" href="{{ history.chain == 'ETH' ? etherscan : bscscan }}/tx/{{history.chainTxHash}}" target="_blank" >
                  {{history.chainTxHash | squeeze : '11,10'}}
                </a>
              </div>
              <div class="col-xl-1 col-lg-1 col-md-2 col-3 text-color-lightgrey text-right text-tiny">
                <span [ngClass]="{
                  'text-blue': (history.state ==0 || history.state ==2),
                  'text-color-green': (history.state ==1 || history.state ==3),
                  'text-color-red': history.state == 0
                }" data-toggle="tooltip" data-placement="top" title="-">{{ history.amount | qlc | currency:'':'':'1.2-8' }} QLC</span>
              </div>
              <div class="col-xl-2 col-lg-2 col-md-3 d-none d-md-block pr-4 text-tiny text-right">
                <span>{{ history.lastModifyTime | date: 'short' }}</span>
              </div>
              <!-- <div class="container transaction-details">

              </div> -->
            </div>


            
          </div>

        </div>
      </div>

      <!-- BUTTON -->
      <!--
      <div class="col-lg-12 mb-0 mt-2 pl-md-2 pr-md-2 text-center" *ngIf="accountBlocksCount>pageSize">
        <a [routerLink]="'/transactions/1/' + accountId" class="btn btn-primary btn-blue">ALL TRANSACTIONS</a>
      </div>
        -->
    </div>
    
  </div>
</div>


<!-- LATEST TRANSACTIONS -->
<div class="container mt-0 mb-3">
    <div class="row">
      
      <div class="col-12 pl-0 pr-0">
        
        <!-- TITLE -->
        <div class="col-lg-12 mb-3 mt-2 pl-md-2 pr-md-2">
          <div class="content-title">
            <h1>Latest Transactions</h1>
          </div>
        </div>
  
        <!-- LIST -->
        <div class="col-lg-12 mb-4 pl-md-2 pr-md-2">
          <div class="content-box-white">
  
  
            <div class="container">
  
              <div class="row qlc-table-header">
                <div class="col-xl-2 col-lg-2 col-md-2 col-sm-2 col-2 pl-4 pb-0">Type</div>
                <div class="col-xl-6 col-lg-5 col-md-5 col-sm-5 col-7 text-truncate">Address / Transaction ID</div>
                <div class="col-xl-2 col-lg-2 col-md-2 col-sm-2 col-3 pr-sm-0 pr-4 text-right">Amount</div>
                <div class="col-xl-2 col-lg-3 col-md-3 col-sm-3 d-none d-sm-block col-6 pr-4 text-right">Time</div>
              </div>
  
              <div class="row qlc-table-row qlc-table-row-twolines closed" *ngFor="let history of walletHistory">
                <div class="col-xl-2 col-lg-2 col-md-2 col-sm-2 col-2 pl-4 pb-0">
                  <span class="qlc-icon icon-{{ history.type }}" title="{{ history.type }}"></span>
                  <span class="d-none d-sm-none d-md-inline-block txState">
                    <span class="text-color-lightgrey">State</span><br>
                    <span class="text-bold-grey">{{ history.type }}</span>
                  </span>
                </div>
                <div class="col-xl-6 col-lg-5 col-md-5 col-sm-5 col-7 pb-0 text-truncate">
                  <span class="text-color-lightgrey">{{history.type == 'Send' ? 'to' : 'from'}}: </span> 
                  <a href="{{ neoService.getExplorer() }}/address/{{history.account}}" target="_blank" >{{ history.account }}</a>
                  <a href="{{ neoService.getExplorer() }}/transaction/{{history.txid}}" target="_blank" ><br>
                    <span class="text-tiny">{{ history.txid }}</span>
                  </a>
                </div>
                <div class="col-xl-2 col-lg-2 col-md-2 col-sm-2 col-3 pb-0 pr-sm-0 pr-4 text-right {{
                  history.type == 'Send' ? 'text-color-red' : 'text-color-green'
                }}">
                  <span data-toggle="tooltip" data-placement="top" title="-">{{history.type == 'Send' ? '-' : '+'}} {{ history.amount | currency:'':'':'1.2-8' }}</span>
                  <br><span class="text-color-grey">{{ history.tokenName }}</span>
                </div>
                <div class="col-xl-2 col-lg-3 col-md-3 col-sm-3 col-12 pr-4 text-right">
                  {{ history.time * 1000 | date: 'short' }}
                </div>
                <div class="container transaction-details">
  
                </div>
              </div>
  
  
              
            </div>
  
          </div>
        </div>
  
        <!-- BUTTON -->
        <!--
        <div class="col-lg-12 mb-0 mt-2 pl-md-2 pr-md-2 text-center" *ngIf="accountBlocksCount>pageSize">
          <a [routerLink]="'/transactions/1/' + accountId" class="btn btn-primary btn-blue">ALL TRANSACTIONS</a>
        </div>
          -->
      </div>
      
    </div>
  </div>


<ng-template #qrCode>
  <div class="modal-body">
        <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
                <span aria-hidden="true">&times;</span>
              </button>
        <div class="qrcode"><img *ngIf="qrCodeImage" [src]="qrCodeImage" /></div>
    
  </div>
</ng-template>


<ng-template #recover>
    <div class="modal-body">

        <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
        <span aria-hidden="true">&times;</span>
        </button>
        <div class="row text-center">
        <div class="col-12">
            <h1 class="pt-5">Your NEO private code is</h1>
            <p class="pb-5">{{ neoPrivateCode }}</p>
        </div>
        </div>

    </div>
</ng-template>